language: bash

services:
  - docker

env:
  global:
    - PATH=$HOME/.local/bin:$PATH

before_install: $TRAVIS_BUILD_DIR/build.sh before-install

env:
  - JOB="docker"
  - JOB="terraform"

jobs:
  include:
    - stage: build
      script: $TRAVIS_BUILD_DIR/build.sh docker
    - script: $TRAVIS_BUILD_DIR/build.sh packer
    - stage: deploy
      script: $TRAVIS_BUILD_DIR/build.sh terraform

branches:
  only:
    - master

notifications:
  email: false
